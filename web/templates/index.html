<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="This website is developed to identify the safety of a URL.">
    <meta name="keywords" content="phishing url, phishing, cyber security, machine learning, classifier, python">
    <meta name="author" content="VAIBHAV BICHAVE">

    <!-- BootStrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        
    <!-- <link href="static/styles.css" rel="stylesheet"> -->
    <title>Phishing URL Detection</title>
</head>
<style>
    body {
        font-size: 14px;
        max-width: 300px;
        margin: 0 auto;
        padding: 10px;
    }
    h2 {
        font-size: 18px;
        text-align: center;
    }
    .form__input {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
    }
    .button {
        width: 100%;
        padding: 15px;
        background-color: white;
        color: black;
        border: none;
        border-bottom: 1px solid gainsboro;
        cursor: pointer;
        font-weight: 650;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        font-size: 16px;
        letter-spacing: 1px;
    }
    .button:hover {
        /* background-color: #439c5a; */
        background-color: gainsboro;
        color: black;
        border: 1px solid black;
    }
    #prediction {
        /* font-weight: normal; */
        text-align: center;
        margin-top: 10px;
        font-size: 12px;
        color: gray;
    }
</style>
<body>
    <!-- <h2>Phishing URL Detection</h2> -->
    <div id="statusBanner" style="background-color: grey; color: white; padding: 10px; text-align: center; font-weight: 1000;">
        Unknown
    </div>
    <div id="prediction"></div>
    <form action="/" method="post" id="urlForm">
        <input type="hidden" name="url" id="url" />
        <button type="button" class="button" role="button" onclick="checkCurrentURL()">CHECK URL</button>
    </form>
    <script>
        // Automatically populate the hidden input with the current URL for testing
        document.addEventListener("DOMContentLoaded", function() {
            const currentURL = window.location.href;
            document.getElementById('url').value = currentURL;
        });
    </script>
    
    <!-- <button class="button" id="button2" role="button" onclick="window.open('{{url}}')" target="_blank" style="display: none;">Still want to Continue</button>
    <button class="button" id="button1" role="button" onclick="window.open('{{url}}')" target="_blank" style="display: none;">Continue</button> -->
    <button class="button" onclick="bookmarkSite()">BOOKMARK</button>
    <button class="button" onclick="reportSite()">REPORT</button>

    <!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>

    <script>
        function checkCurrentURL() {
            // const currentURL = window.location.href;
            // const currentURL = "https://www.google.com";
            const currentURL = "https://000jbjdvvdhjvbdjvndvdv.s3.us-east-2.amazonaws.com/";
            document.getElementById('url').value = currentURL;
            document.getElementById('urlForm').submit();
        }

        function bookmarkSite() {
            alert("Bookmarking this site is not supported programmatically in most browsers. Please use your browser's bookmark feature.");
        }

        function reportSite() {
            const currentURL = window.location.href;
            alert("Reporting the site: " + currentURL);
        }

        let x = parseFloat('{{xx}}'); // Ensure x is a numeric value
        if (isNaN(x)) {
            x = 0; // Default to 0 if x is not a valid number
        }
        let num = x * 100;
        if (0 <= x && x < 0.50) {
            num = 100 - num;
        }
        let txtx = num.toString();
        const statusBanner = document.getElementById("statusBanner");
        if (x <= 1 && x >= 0.50) {
            var label = "Website is " + txtx + "% safe to use";
            document.getElementById("prediction").innerHTML = label;
            statusBanner.style.backgroundColor = "green";
            statusBanner.innerHTML = "Safe";
        } else if (0 <= x && x < 0.50) {
            var label = "Website is " + txtx + "% unsafe to use";
            document.getElementById("prediction").innerHTML = label;
            statusBanner.style.backgroundColor = "red";
            statusBanner.innerHTML = "Unsafe";
        } else {
            var label = "Undefined URL";
            document.getElementById("prediction").innerHTML = label;
            statusBanner.style.backgroundColor = "grey";
            statusBanner.innerHTML = "Unknown";
        }
    </script>
</body>
</html>

<!-- <div id="prediction"></div>
<button class="button2" id="button2" role="button" onclick="window.open('{{url}}')" target="_blank" style="display: none;">Still want to Continue</button>
<button class="button1" id="button1" role="button" onclick="window.open('{{url}}')" target="_blank" style="display: none;">Continue</button> -->

<!-- New Buttons -->
<!-- <div style="margin-top: 20px;">
    <button class="button" onclick="bookmarkSite()">Bookmark Site</button>
    <button class="button" onclick="reportSite()">Report Site</button>
</div> -->

<!-- JavaScript for new buttons -->
<!-- <script>
    function bookmarkSite() {
        alert("Bookmarking this site is not supported programmatically in most browsers. Please use your browser's bookmark feature.");
    }

    function reportSite() {
        const currentURL = window.location.href;
        alert("Reporting the site: " + currentURL);
        // You can add logic here to send the URL to your backend for reporting
    }
</script> -->